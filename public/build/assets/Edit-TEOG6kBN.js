import{R as w,j as e,r as T,a as S}from"./app-KrnwSHJn.js";import{A as k}from"./AuthenticatedLayout-DiwffALl.js";import{G as I,S as l,C as F,o as u}from"./ActionBar-WMUz1Erl.js";import{C as A,d as E}from"./Delete-DK_ZgqZR.js";import{S as D,A as N,I as $,T as m}from"./Snackbar-DabAd_Z-.js";import{B as g}from"./Box-C3rZ52Yg.js";import{M as v}from"./MenuItem-E7RDDDLD.js";import"./ApplicationLogo-D2EIyXXd.js";import"./transition-BODHFSKf.js";function B({index:s,image:o,uni:p}){const[i,b]=w.useState(o.shapeType),y=a=>{let t=a.target.value;b(t);const d=new FormData;d.append("shapeType",t);const n=localStorage.getItem("apiToken");axios.post(route("update.template.image",{uni:p}),d,{headers:{Authorization:`Bearer ${n}`}}).then(x=>{r(x.data.message,"success")}).catch(x=>{})},[c,h]=w.useState({status:!1,message:"",severity:""}),r=(a,t)=>{h({status:!0,message:a,severity:t})},j=(a,t)=>{t!=="clickaway"&&h(!1)},f=a=>{const t=a.target.files[0];if(t){const d=s>1?"image":s==0?"thumbnail":"shade",n=new FormData;n.append("image",t),n.append(p,p),n.append("type",d),n.append("purpose","updateImage");const x=localStorage.getItem("apiToken");axios.post(route("update.template.image",{uni:p}),n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${x}`}}).then(C=>{r(C.data.message,"success")}).catch(C=>{})}};return e.jsxs(A,{className:"mb-4",sx:{width:"300px",height:"300px",margin:"20px",position:"relative",overflow:"hidden"},children:[c.status&&e.jsx(D,{open:c.status,autoHideDuration:4e3,onClose:j,TransitionComponent:I,anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(N,{onClose:j,severity:c.severity,variant:"filled",sx:{width:"100%"},children:c.message})}),e.jsx(g,{sx:{position:"absolute",bottom:"0px",left:"0px",width:"100%",backgroundColor:"lightblue",opacity:50},children:e.jsx("input",{type:"file",onChange:a=>f(a)})}),e.jsxs("div",{className:"mt-2",children:[typeof o=="string"&&e.jsx(g,{sx:{width:"100%",height:"100%"},children:e.jsx("img",{src:o,alt:`Selected file ${s}`,style:{width:"100%",height:"100%",objectFit:"cover"}})}),typeof o!="string"&&e.jsx(g,{sx:{width:"100%",height:"100%"},children:e.jsx("img",{src:o.image_2,alt:`Selected file ${s}`,style:{width:"100%",height:"100%",objectFit:"cover"}})}),o.isFrame&&e.jsx(l,{sx:{position:"absolute",top:"10px",left:"10px",margin:"7px",borderRadius:"12px",width:"200px",padding:"10px 20px ",backgroundColor:"#fff",color:"black"},spacing:1,children:e.jsxs(F,{value:i,label:"Shape Type",id:`shapeType-${s}`,labelId:`shapeType-${s}`,onChange:a=>y(a),children:[e.jsx(v,{value:"circle",children:"Circle"}),e.jsx(v,{value:"square",children:"Square"}),e.jsx(v,{value:"other",children:"Other"})]})})]}),e.jsx(g,{sx:{position:"absolute",top:"10px",right:"10px"},children:e.jsx($,{onClick:()=>handleRemoveFileInput(s),"aria-label":"delete",children:e.jsx(E,{color:"warning"})})})]},s)}function P({auth:s,type:o,title:p,template:i,headerOptions:b,categories:y="",apiToken:c}){w.useEffect(()=>{localStorage.setItem("apiToken",c)},[]);const h=window.location.href.split("/templates/")[1],[r,j]=T.useState({title:i.data.title,tags:i.data.tags,height:i.data.height,width:i.data.width}),f=[i.data.thumbnail,i.data.whiteImage,...i.data.images];return e.jsxs(k,{user:s.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:p}),children:[e.jsx(S,{title:"Dashboard"}),e.jsx("div",{className:"square-pattern-bg",children:e.jsx("div",{className:"py-12",style:{width:"100%"},children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",style:{position:"relative",width:"100%"},children:[e.jsxs(l,{spacing:5,direction:"row",justifyContent:"center",sx:{padding:"30px 0px",backgroundColor:"white",width:"100%"},children:[e.jsxs(l,{spacing:1,children:[e.jsx(m,{variant:"p",component:"p",children:"Enter title for template"}),e.jsx(u,{value:r.title,sx:{width:"200px"},id:"outlined-basic",label:"Title",variant:"outlined"})]}),e.jsxs(l,{spacing:1,children:[e.jsx(m,{variant:"p",component:"p",children:"Enter tags for template"}),e.jsx(u,{value:r.tags,sx:{width:"200px"},id:"outlined-basic",label:"Tags",variant:"outlined"})]}),e.jsxs(l,{spacing:1,children:[e.jsx(m,{variant:"p",component:"p",children:"Enter width for template"}),e.jsx(u,{value:r.width,sx:{width:"200px"},id:"outlined-basic",label:"Width",variant:"outlined"})]}),e.jsxs(l,{spacing:1,children:[e.jsx(m,{variant:"p",component:"p",children:"Enter height for template"}),e.jsx(u,{value:r.height,sx:{width:"200px"},id:"outlined-basic",label:"Height",variant:"outlined"})]})]}),e.jsx(l,{direction:"row",flexWrap:"wrap",justifyContent:"center",children:f.map((a,t)=>e.jsx(B,{index:t,image:a,uni:a.uni||h,type:t>1?"image":t==0?"thumbnail":"shade"},t))})]})})})]})}export{P as default};
